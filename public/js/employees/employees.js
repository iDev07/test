(function($){const $module_container=$('#employees');samo.employees=function(){const _ROOT_URL=samo.ROUTES.employees.url;samo.edit_login_prev=function(){const $login=$('#modalContainer .partpass_edit');samo.set_data_mask($login);samo.helpalt_field($login);$login.find('form').on('submit',function(e){e.stopPropagation();e.preventDefault();if(check_fields($login)){$.post(this.action,$(this).serialize(),null,'script');}}).end().find('input.date').datePicker();$login.find('.PARTPASS_TOWN').chosen({enable_split_word_search:false,search_contains:true});};samo.clearinc=function(){var href=window.location.href;href=href.replace(new RegExp(/\&?PARTPASS_NEW=\d+/),'');window.history.pushState({},'',href);};samo.set_partpass_list_events=function(){$module_container.find('.partpass_delete').on('click',function(e){e.stopPropagation();e.preventDefault();if(!confirm($('#login_list').data('delete-confirm'))){return false;}
var pinc=parseInt($(this).parent().parent().data('partpass'),10);var result={};result.samo_action='DELETE_PARTPASS';result.PARTPASS_INC=pinc;$.getScript(_ROOT_URL+$.param(result),null,false);return true;});$module_container.find('.partpass_edit').on('click',function(e){e.stopPropagation();e.preventDefault();var pinc=parseInt($(this).parent().parent().data('partpass'),10);var result={};result.samo_action='EDIT_PARTPASS';if(pinc){result.PARTPASS_INC=pinc;}
$.getScript(_ROOT_URL+$.param(result),null,false);});};samo.searchTable=function(){$module_container.find('.logins input').on('input',function(e){$table=$(this).closest('.logins');var $filters=$table.find('tr[name="filters"] td');var $rows=$table.find('tr[name="search"]');$rows.each(function(rowIndex){var valid=true;$(this).find('td').each(function(colIndex){if($filters.eq(colIndex).find('input').val()){if($(this).html().toLowerCase().indexOf($filters.eq(colIndex).find('input').val().toLowerCase())==-1){valid=valid&&false;}}});if(valid===true){$(this).css('display','');}else{$(this).css('display','none');}});});};$('.table-filters input').on('input',function(){filterTable($(this).parents('table'));});function check_fields($container){var is_ok=true;$container.find('.required').not('label, :disabled').each(function(){if(!$.NonEmptyValue(this)){is_ok=false;return false;}});if(is_ok){$container.find('input.date').each(function(){if(!$.valid_date(this)){is_ok=false;return false;}});}
if(is_ok){$container.find('input, select').not('label, :disabled').each(function(){if(!$.RegexpValue(this)){is_ok=false;return false;}});}
return is_ok;}
if(window.location.hash=='#PARTPASS_LIST'){$module_container.find('.partpass_create').click();}
samo.searchTable();samo.set_partpass_list_events();};$(samo.employees);})(samo.jQuery);