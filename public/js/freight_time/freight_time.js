(function($){var container=samo.initModuleContainer('freight_time');samo.freight_time=function(){var _ROOT_URL=samo.ROUTES.freight_time.url,$module_container=container,_controls=$('select,input',$module_container),DOLOAD=(parseInt($.getParameter('DOLOAD',true,$module_container))==1);samo.cache_controls($module_container);$module_container.find('select').on('change',function(){$module_container.find('.resultset').empty();});$module_container.find('.TOWNFROMINC,.STATEINC,.TOURINC,.TOWNTOINC').each(function(){$(this).find('option').each(function(){if($(this).attr('data-search-string')){$(this).attr('data-search-string',$(this).attr('data-search-string')+' '+$(this).attr('data-search-string').fixKeyboardLayout());}});}).chosen({});$module_container.find('.TOWNFROMINC,.STATEINC,.TOURINC').on('change',function(){if(this.name!='TOURINC'){$(samo.controls.TOURINC).val(0);}
$(samo.controls.TOWNTOINC).val(0);$.getScript(getParams(this.name));});$module_container.find('.load').on('click',getResult);if(DOLOAD){getResult();}
function getResult(){if(samo.checkStateAndTownfrom($module_container)){$.getScript(getParams('FREIGHTTIME'),true);}}
function getParams(action){var useGET=arguments[1]||false;var result={};result.samo_action=action;_controls.each(function(){var name=this.name||$(this).attr('name');if(name=='TOWNTOINC'&&action!='FREIGHTTIME'){return;}
var value=$.controlValue(this,useGET);if(name&&value&&value!==0){result[name]=value;}});return _ROOT_URL+$.param(result);}};$(samo.freight_time);})(samo.jQuery);