(function($){samo.deposit=function(){samo.acquiring.work('deposit');};samo.pay_deposit=function(){const $depositform=$('#deposit_form');const CLAIM=$depositform.data('claim');const $select_deposit=$depositform.find('.DEPOSITINC');const $sum_input=$depositform.find('input.deposit_input');const $pay_button=$depositform.find('#pay_deposit');$select_deposit.on('change',function(){let selected=$(this).find('option:selected');let maxForClaim=selected.data('max-for-claim');let currency=selected.data('cur-alias');$sum_input.val(maxForClaim);$depositform.find('.deposit-selected-currency').text(currency)}).change();$pay_button.on('click',function(){const selectedDeposit=$select_deposit.find('option:selected');const max_amount=parseFloat(selectedDeposit.data('max-for-claim'));const deposit_inc=$select_deposit.val();const sum=parseFloat($sum_input.val());const cur_alias=selectedDeposit.data('cur-alias');if(sum>0&&Math.floor(sum*100)<=Math.floor(max_amount*100)){$.post(samo.ROUTES.deposit.url+$.param({samo_action:'payDeposit'}),{CLAIM:CLAIM,DEPOSIT:deposit_inc,SUM:sum.toFixed(2),CUR_ALIAS:cur_alias,},null,'script');}else{$sum_input.errorField(samo.i18n('DEPOSIT_INVALID_SUM'));}});};})(samo.jQuery);