(function($){samo.check_passport=function(){var _ROOT_URL=samo.ROUTES.check_passport.url;var $module_container=$("#check_passport");var _controls=$module_container.find('select,input');var $checkIn=$module_container.find('.CHECKIN');var $pvalidDate=$module_container.find('.PVALIDDATE');var $stateInc=$module_container.find('.STATEINC');var $visaInc=$module_container.find('.VISAINC');var $visaOptions=$visaInc.find('option');var $check=$module_container.find('.load');var $result=$module_container.find('.result');var DOLOAD=(parseInt($.getParameter('DOLOAD',true,$module_container))==1);$module_container.find('.STATEINC,.TOWNFROMINC,.VISAINC,.CITIZENSHIP,.BORNPLACE,.NIGHTS,.ISGDS').chosen({}).on('change',clearResult);samo.cache_controls($module_container);$checkIn.datePicker();$pvalidDate.datePicker();$module_container.find('.TOWNFROMINC').on('change',function(){$stateInc.find('option').remove();$visaOptions.remove();$.getScript(getParams('TOWNFROMINC'),true);});$check.click(function(){var is_ok=true;$(_controls).each(function(){if(is_ok&&!$(this).val()){is_ok=false;$(this).errorField(samo.i18n('REQUIRED_FIELD_EMPTY'));}});if(is_ok){$.getScript(getParams('CHECK'));}});samo.showResultCheck=function(msg,error,note){$result.html('');$result.removeClass('error');if(error){$result.addClass('error');}
$result.html(msg);if(note){$result.append('<span class="ruleNote">'+note+'</span>');}};function clearResult(){samo.showResultCheck('');}
function getParams(action){var useGET=arguments[1]||false;var result={};result.samo_action=action;_controls.each(function(){var name=this.name||$(this).attr('name');var value=$.controlValue(this,useGET);if(typeof(name)!=='undefined'&&typeof(value)!=='undefined')
result[name]=value;});return _ROOT_URL+$.param(result);}
if(DOLOAD){$check.click();}};$(samo.check_passport);})(samo.jQuery);